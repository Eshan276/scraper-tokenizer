# **Dish Comparison System**

This project enables the comparison of dish menus across multiple restaurants to identify similar dishes and evaluate price differences. It uses NLP techniques, machine learning models, and web scraping for menu data acquisition and comparison.

---

## **Project Structure**

### **Root Directory**  
The root directory contains the main scripts, JSON result files, and temporary files created during development.  

- **`comparison_results.json`**: Contains the results of menu comparisons.  
- **`comparison_results_2.json`**: Another set of comparison results for testing different datasets or parameters.  
- **`comparison_results_with_missing.json`**: Includes comparisons with incomplete or missing menu data.  
- **`filtered_comparison_results.json`**: Results after applying filters to remove irrelevant matches or noise.  
- **`menu_items_village.json`**: Main restaurant's menu file.  
- **`test.py`** and **`test2.py`**: Test scripts for specific functionality during development.  
- **`tempCodeRunnerFile.py`**: Temporary file generated by the code editor during execution.

---

### **Subdirectories**

#### **`app/`**
Contains the entry point of the application and its compiled Python files:
- **`main.py`**: Main script to run the application, including API endpoints and orchestration logic.

#### **`Data/`**
Houses JSON files containing menu data scraped or fetched from various restaurants:
- **`chennai-dosas-hicksville.json`**
- **`dosaworld.json`**
- **`kathis-and-kababs-hicksville.json`**
- **`menu_data_jazzera.json`**
- **`menu_items_village.json`** (Main restaurant menu)
- **`taste-of-chennai-hicksville.json`**
- **`yelp_data.json`**

#### **`models/`**
Contains machine learning models used in the project:
- **`ml_model.py`**: Implements dish similarity comparison using TF-IDF and cosine similarity.

#### **`templates/`**
Contains HTML templates for rendering any frontend views if required:
- **`index.html`**: A sample webpage template.

#### **`utils/`**
Utility functions and scripts for supporting various functionalities:
- **`apis.py`**: Functions to fetch weather data and other API integrations.
- **`comparison.py`**: Logic for comparing menu items between the main restaurant and nearby restaurants.
- **`comparison2.py`**: Alternative or extended comparison logic.

##### **`utils/scrap/`**
Web scraping utilities to gather menu data from external sources:
- **`scrapper.py`**: General-purpose scraper.
- **`scrapper3.py`**: Specific implementation for additional scraping needs.
- **`yelp_scraper.py`**: Extracts menu data from Yelp listings.

---

## **Features**

1. **Dish Matching**:
   - Uses **TF-IDF Vectorization** and **cosine similarity** to find similar dishes across menus.  
   - Threshold-based filtering (e.g., similarity > 0.7) to ensure high-quality matches.

2. **Price Comparison**:
   - Identifies price differences between similar dishes.
   - Highlights dishes where prices deviate significantly.

3. **Weather-Based Pricing**:
   - Adjusts menu predictions based on external weather conditions (e.g., colder temperatures, rain).

4. **NLP & Machine Learning**:
   - Pretrained models like **BERT** or vectorized embeddings enhance accuracy for dish similarity.
   - Custom logic for text preprocessing and vector comparisons.

5. **Web Scraping**:
   - Extracts menu data from restaurant websites (e.g., Yelp) and stores it in JSON format.

---

## **Setup and Installation**

### **Requirements**
- Python 3.10+
- Libraries:  
  Install required dependencies using:
  ```bash
  pip install -r requirements.txt
    ```
### Key dependencies:

- scikit-learn
- nltk
- flask (for API)
- requests
- beautifulsoup4

### Steps to Run:

1. **Download the repository:**
    ```bash
    git clone https://github.com/Eshan276/scraper-tokenizer.git
    cd scraper-tokenizer
    ```
2. **Install Requirements**
   ```bash
      pip install -r requirements.txt
      pip install --upgrade git+https://github.com/m-wrzr/populartimes
   ```

2. **Run the main application:**
    ```bash
    uvicorn app.main:app --reload 
    ```
    and going to the "http://127.0.0.1:8000"  will give u the predicted price 
    And The full webView is present in `allmenu.html` .

### Usage

1. **Adding Menu Data**
   Place JSON menu files of nearby restaurants in the Data/ directory. The main restaurant's menu should be named `menu_items_village.json`.

2. **Running Menu Comparisons**
   Use `comparison.py` to process and compare menu data:
    ```bash
    python utils/comparison.py
    ```
   Results will be saved as `comparison_results.json`.

3. **Weather-Based Adjustments**
   Integrate weather data using `apis.py`. Ensure to include an API key for weather services in your environment variables.

### Example Workflow

1. **Preprocess Dish Descriptions:**
   Cleans and tokenizes dish names and descriptions.

2. **Vectorize Dishes:**
   Converts text data into vectors using TF-IDF or pretrained embeddings.

3. **Compare Similarity:**
   Computes cosine similarity between the main restaurant menu and nearby restaurant menus.

4. **Filter Results:**
   Applies thresholds to exclude low-quality matches.

5. **Output Results:**
   Stores matched dishes and their price comparisons in a JSON file.

